{"version":3,"file":"\/Users\/john\/.boot\/cache\/tmp\/Users\/john\/programmingstuff\/clojurescript\/ascii-dungeoncrawler\/237\/-2yfclb\/js\/main.out\/ascii_dungeoncrawler\/systems\/collision.js","sources":["collision.cljs"],"lineCount":287,"mappings":"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\/B,2BAAO8B,+CAEA,AAACxG,2BAAOoG,aAAaxG","names":["ascii-dungeoncrawler.systems.collision\/on-damaged","entity1","entity2","ascii-dungeoncrawler.systems.collision\/on-blocked","ascii-dungeoncrawler.systems.collision\/between?","min","value","max","ascii-dungeoncrawler.systems.collision\/get-tile-rect","x","y","ascii-dungeoncrawler.constants\/tile-size","p__7518","p__7519","vec__7522","cljs.core\/nth","vec__7523","ascii-dungeoncrawler.systems.collision\/rect-intersects?","left1","top1","right1","bottom1","left2","top2","right2","bottom2","c1","c2","c3","c4","p__7524","p__7525","vec__7530","vec__7531","ascii-dungeoncrawler.systems.collision\/collides?","x1","y1","x2","y2","vec__7532","vec__7533","_","x1m","y1m","x2m","y2m","ascii-dungeoncrawler.systems.collision\/moved?","pos","next-pos","cljs.core\/not=","p__7534","vec__7540","vec__7541","map__7542","cljs.core\/apply","cljs.core\/hash-map","vec__7543","cljs.core\/get","ascii-dungeoncrawler.systems.collision\/entity->pos","entity-id","p__7546","vec__7554","ascii-dungeoncrawler.systems.collision\/get-collisions","entities","collided-with?","p1__7545#","cljs.core\/partial","cljs.core\/filter","get-position","cljs.core\/map","p__7555","vec__7556","vec__7557","map__7558","vec__7559","px","py","collisions->vec","cljs.core\/comp","ascii-dungeoncrawler.systems.collision\/order-coords","min1","max1","min2","max2","p__7561","p__7562","vec__7569","vec__7570","ascii-dungeoncrawler.systems.collision\/intersect-amounts","vec__7571","vec__7572","vec__7573","vec__7574","x1'","x1m'","x2'","x2m'","sign-x","y1'","y1m'","y2'","y2m'","sign-y","x-amount","y-amount","p__7576","vec__7582","ascii-dungeoncrawler.systems.collision\/adjust-position","p1","p2","vel-x","vel-y","vec__7583","vec__7584","neg","cljs.core\/*","int-x","int-y","abs-int-x","abs-int-y","p1__7575#","cljs.core\/mapv","js\/Math","vec__7585","x-adjusted","ascii-dungeoncrawler.utils\/add-vectors","intersect-y","vec__7586","y-adjusted","intersect-x","ascii-dungeoncrawler.systems.collision\/update-entity-position","component-map","position","cljs.core\/assoc-in","p1__7587#","ascii-dungeoncrawler.systems.collision\/update-entity-velocity-if-stopped","stopped?","ascii-dungeoncrawler.systems.collision\/calculate-next-position","velocity","other-entities","adjusted","cljs.core\/reduce","p__7593","vec__7594","vec__7595","accum-pos","position-data","collidable-data","map__7596","other-pos","and__4976__auto__","ascii-dungeoncrawler.systems.collision\/mk-update-position-component-data","entities-with-position","p__7605","vec__7606","vec__7607","velocity-data","entity","map__7608","map__7609","acceleration","cljs.core\/remove","real-next-pos","or__4988__auto__","ascii-dungeoncrawler.systems.collision\/collision-system","state","ascii-dungeoncrawler.ecs\/entities-with-components","get-velocity","p__7616","vec__7617","vec__7618","update-position-component-data","p1__7612#","cljs.core\/update-in"]}